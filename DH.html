<!DOCTYPE html>
<html ng-app="myApp" ng-controller="myCtrl" ng-init="generateKeys()">
<head>
	<title>Diffie-Hellman Key Exchange</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script type="text/javascript"src="angular.js"></script>
	<script type="text/javascript"src="DH.js"></script>
	<script type="text/javascript"src="BigInt.js"></script>

</head>
<body>
<div class="page">
	
	<div>
		<h1> Diffie-Hellman Key Exchange </h1>
		<p> [Introduction goes here] </p>
	</div>
	
	<div>
		<h2>Public numbers</h2>
		<p>Public numbers are agreed upon at the start of the transaction. 
		 They are sent in the clear so anyone can see them.</p>
		<ul>
		<li>P:An arbitrary large number</li>
		<li>G:An arbitrary large number</li>
		</ul>
	</div>
	
	<div>
		<h2>Numbers Alice Knows</h2>
		<ul>
		<li>P: It's public</li>
		<li>G: It's public</li>
		<li>Xa: Alice's <u>private key</u> is a randomly generated number only she knows.</li>
		</ul>
	</div>
	
	<div>
		<h2>Numbers Bob Knows</h2>
		<ul>
		<li>P: It's public</li>
		<li>G: It's public</li>
		<li>Xb: Bob's <u>private key</u> is a randomly generated number only he knows.</li>
		</ul>
	</div>
	
	<div>
		<h2> Public generated numbers</h2>
	
		<p>Using the private data and shared data both parties generate new shared data</p>
	
		<ul>
		<li>Ya=(G^Xa) mod P: Alice's public key is a function of her private key and public information.</li>
		<li>Yb=(G^Xb) mod P: Alice's public key is a function of her private key and public information</li>
		</ul>
	</div>
	
	<div>
	Ya --> Bob<br>
	Yb --> Alice
	
	</div>
	
	
	<div>
	
		<h2> Private generated numbers</h2>
	
		<p>Using the private data and shared data both parties generate new shared data</p>
	
		<p>Ka=(Yb^Xa) mod P</p>
		<p>Kb=(Ya^Xb) mod P</p>
		<p>Ka=Kb</p>
	</div>
	
	<div>
		<h1> Demo </h1>
	
		Write some text in textbox:
		<input type="text" ng-model="plain" ng-change="changeMessage()" /><br>
		
		
		
		<table>
		<tbody>
	
		<tr>
			<th>
			G
			</th>
			<td>
			{{G}}
			</td>
		</tr>
	
		<tr>
			<th>
			P
			</th>
			<td>
			{{P}}
			</td>
		</tr>
	
		<tr>
			<th>
			Alice's Secret (a)
			</th>
			<td>
			{{a}}
			</td>
		</tr>
	
		<tr>
			<th>
			Bob's Secret(b)
			</th>
			<td>
			{{b}}
			</td>
		</tr>
	
		<tr>
			<th>
			Shared Secret (s)
			</th>
			<td>
			{{s}}
			</td>
		</tr>
		</tbody>
		</table>
		
		
	
		<h1 ng-show="plain" ng-model="plain">Hello {{plain}}</h1>
	
		<h2>Plain</h2>
		<p ng-model="plain" > {{plain}}</p>
	
		<h2>Plain(hex)</h2>
		<p ng-model="hexPlain" > {{hexPlain}}</p>
		<p >Crypt {{ hexCrypt }}</p>
		<p >Hello {{ hexCrypt }}</p>
	</div>
	
	<div>
		<hr>
		<ul id="navbar">
		<li><a href="OTP.html">Previous:One Time Pad</a></li>
		<li><a href="index.html">Up:Contents </a></li>
		<li><a href="RSA.html"> Next: RSA </a></li>
		</ul>
	</div>

</div>
</body>

<script type="text/javascript">

String.prototype.hexEncode = function(){
    var hex, i;

    var result = "";
    for (i=0; i<this.length; i++) {
        hex = this.charCodeAt(i).toString(16);
        result += (" "+hex).slice(-4);
    }

    return result
}

var app = angular.module('myApp', []);
app.controller('myCtrl', function($scope) {
  	$scope.G="?";
  	$scope.P="?";
  	$scope.a="?";
  	$scope.b="?";
  	$scope.s="?";
    
    $scope.generateKeys = function(){
    
    	$scope.G= random_prime(30, 255);
    	$scope.P= random_prime(30, 255);
    	$scope.a= $scope.randByteArray(10);
    	$scope.b= $scope.randByteArray(10);
    
    }
    
    $scope.randByteArray = function(n)
    {
    	var a =[];
    	for(var i=0;i<n;i++)
    	{
    		a.push(Math.round(Math.random()*255));
    	}
    }
    
    $scope.bytesToString = function(n)
    {
    	var a =[];
    	for(var i=0;i<n;i++)
    	{
    		a.push(Math.round(Math.random()*255));
    	}
    }
    
    $scope.changeMessage = function() {
        $scope.hexPlain = $scope.plain.hexEncode();
      };
});

</script>
<script type="text/javascript">
//console.log("0xF1" + data.charCodeAt(0).toString(16));
</script>

</html>
